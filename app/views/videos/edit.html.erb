<div class="row-fluid">
  <div class="span3" id="left_column">
    <%= render "toggle_preview_mode" %>
    
    <% if can? :edit, @video %>
      <%= render "workflow_steps" %>
    <% end %>
  </div>
  
  <div id="main_body" class="offset1 span8">
    <div id="permalink" class="alert alert-success">
      <h4 class="alert-heading">Permalink</h4>
      <p>To share this item with others use the following canonical link</p>
      <address><%= link_to video_url(params[:id]), video_url(params[:id]) %></address>
    </div>

  <% if flash[:upload] %>
    <div id="upload_format" class="alert active">
      <p class="notice"><%= flash[:upload] %></p>
    </div>
  <% end %>

  <% if flash[:errors] %>
    <div id="errors_information" class="alert alert-error active">
     <p class="notice"><%= flash[:errors] %></p>
  </div>
  <% end %>
  
  <%
   # Switch based on the current step to display the appropriate content. A
   # richer version down the road might show all at once and use some clever
   # Javascript to do accordion style on the fly switching. For now keep it 
   # simple and without any extra functionality %>
   <% case params[:step]
     when 'file_upload' -%>
       <%= render 'file_upload' %>
   <% when 'basic_metadata' %>
       <%= render 'basic_metadata' %>
   <% when 'access_control' %>
       <%= render 'access_control' %>
   <% when 'preview' %>
       <%= render 'preview' %>
   <% else %>
       <%= render 'file_upload' %>
   <% end %>
</div>

<% content_for :title do %>
  Edit -
  <% unless @video.descMetadata.title.empty? %>
    <%= @video.descMetadata.title.first %> (<%= @video.pid %>)
  <% else %>
    <%= @video.pid %>
  <% end %>
<% end %>
