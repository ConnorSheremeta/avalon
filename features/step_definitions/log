SOLRIZER: loading field name mappings from /home/cureo/hydrant/config/solr_mappings.yml
resetting mappings for Solrizer::FieldMapper::Default
Using the default profile...
Feature: Check basic metadata fields (form)
  I want to see only certain fields for the simple view

  @create
  Scenario: Limited fields present                   # features/checkMetadataFields.feature:5
    Given I am logged in as "archivist1@example.com" # features/step_definitions/user_steps.rb:5
    When I create a new video                        # features/step_definitions/metadata_steps.rb:1
    Then I should see a simple metadata form         # features/step_definitions/metadata_steps.rb:5

  @edit
  Scenario: Values persist in the system                          # features/checkMetadataFields.feature:11
    Given I am logged in as "archivist1@example.com"              # features/step_definitions/user_steps.rb:5
    And that "hydrant:basic-metadata" has been loaded into fedora # features/step_definitions/edit_metadata_steps.rb:49
      Refreshed hydrant:basic-metadata
    When I edit "hydrant:basic-metadata"                          # features/step_definitions/metadata_steps.rb:12
    Then I should see the changes to the metadata                 # features/step_definitions/metadata_steps.rb:24

@file_assets
Feature: Associate bitstreams with an object and return feedback based on the content
  type

  Scenario: Upload files on catalog edit page                # features/file_upload.feature:5
    Given I am logged in as "archivist1@example.com"         # features/step_definitions/user_steps.rb:5
    And that "hydrant:318" has been loaded into fedora       # features/step_definitions/edit_metadata_steps.rb:49
      Refreshed hydrant:318
    And that "archivist1@example.com" can edit "hydrant:318" # features/step_definitions/edit_metadata_steps.rb:62
    When I go to the edit document page for hydrant:318      # features/step_definitions/web_steps.rb:23
    And I upload the file "spec/fixtures/videoshort.mp4"     # features/step_definitions/file_management.rb:1
      <!DOCTYPE html>
      <html>
      <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta charset="utf-8">
      <title>Pipi - Hydrant</title>
      <link href="http://www.example.com/catalog/opensearch.xml" title="Hydrant" type="application/opensearchdescription+xml" rel="search">
      <link href="/assets/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">
      <link href="/assets/application.css" media="screen" rel="stylesheet" type="text/css">
      <script src="/assets/application.js" type="text/javascript"></script><link href="/assets/hydra/html_refactor.css" media="all" rel="stylesheet" type="text/css">
      <script src="/assets/hydra/hydra-head.js" type="text/javascript"></script><script src="/assets/jquery.form.js" type="text/javascript"></script><script src="/assets/spin.min.js" type="text/javascript"></script>
      </head>
      <body class="blacklight-catalog blacklight-catalog-edit">
      
      		<div id="hd">
      			<div id="select-item-box">
        <ul>
      <li><a href="/hydra/assets/new?content_type=video" class="create_asset">Add an Audio Resource</a></li>
          <li><a href="/hydra/assets/new?content_type=video" class="create_asset">Add a Video Resource</a></li>
        </ul>
      </div>      
      
      
      <nav id="util_links"><a href="/users/edit">archivist1@example.com</a>
      
          
          <a href="/users/sign_out">Log Out</a>
      </nav>
      </div>
      	    
          <div id="bd">
            <div id="main">
              <div id="main_container">
                
                <div id="showHead">
        <div id="showUtils">
          <span class="back_to_cat"><a href="/catalog?action=index&amp;controller=catalog">← Return to search results</a></span>
          	<span class="edit-browse">
          		<a href="/catalog/hydrant:318?viewing_context=browse" class="browse toggle">Switch to browse view</a>
          	</span>
        </div>
      </div>
      <div id="document" class="document_edit ">
        <div id="hydrant_318">
          <h1>Add Your Work</h1>
          <div class="document">
                	<fieldset id="uploader">
      <legend>File Upload</legend>
      
      	    	<!-- This form will be progressively enhanced by the Fluid Uploader component. -->
      	    	<form accept-charset="UTF-8" action="/video_assets" class="uploader-form step" data-remote="true" enctype="multipart/form-data" method="post">
      <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>	      	<input type="hidden" name="container_id" value="hydrant:318"><div class="uploader-contents">
        <p>Browse to upload a file.</p>
        <!-- <input name="Filedata-orig" type="file" /> -->
        <input name="Filedata[]" type="file">
      </div>
      	      	
      	      	<input id="file_upload_id" name="id" type="hidden" value="hydrant:318"><input id="files_original" name="original" type="hidden"><p>
      	        	<input name="upload_file" type="submit" value="Upload File"></p>
      </form>  	</fieldset>
      <form accept-charset="UTF-8" action="/hydra/assets/hydrant:318?asset_id=hydrant%3A318" class="step" id="publication_history_form" method="post">
      <div style="margin:0;padding:0;display:inline">
      <input name="utf8" type="hidden" value="✓"><input name="_method" type="hidden" value="PUT">
      </div>  <p id="title_field" class="fedora-text-field">
          <label for="title">Title<span class="required-note">Required</span></label>
          <input class="fieldselector" name="field_selectors[descMetadata][title][]" type="hidden" value="title"><input class="editable-edit edit" id="title" data-datastream-name="descMetadata" name="asset[descMetadata][title][0]" value="Pipi" required type="text"></p>
      
        <p id="doc_field" class="fedora-text-field">
          <label for="creator">Creator<span class="required-note">Required</span></label>
          <input class="fieldselector" name="field_selectors[descMetadata][creator][]" type="hidden" value="creator"><input class="editable-edit edit" id="creator" data-datastream-name="descMetadata" name="asset[descMetadata][creator][0]" value="Popo" required type="text"></p>
      
        <p id="doc_field" class="fedora-text-field">
          <label for="date_of_creation">Date of creation</label>
          <input class="fieldselector" name="field_selectors[descMetadata][date_of_creation][]" type="hidden" value="date_of_creation"><input class="editable-edit edit" id="date_of_creation" data-datastream-name="descMetadata" name="asset[descMetadata][date_of_creation][0]" value="" type="text"></p>
      
        <input id="publisher_wf_step" name="wf_step" type="hidden"><input id="publisher_content_type" name="content_type" type="hidden" value="video"><div class="all-steps-actions">
          <button id="all_save_continue" name="all_save_continue">Save and Continue Editing</button>
          <button id="all_save_finish" name="all_save_finish">Save and Finish</button>
        </div>
      </form> 
      
      
          </div>
        </div>
      </div>
        <div class="delete-asset">
          <form action="/hydra/assets/hydrant:318" class="button_to" method="post"><div>
      <input name="_method" type="hidden" value="delete"><input data-confirm="Are you sure?" type="submit" value="Delete This Item">
      </div></form>
        </div>
      
              </div>
            </div>
            <div id="sidebar"></div>	
      	  </div>
      	    
      	    
      		<div id="ft">
            <div class="contact_info"></div> 
              <div class="aux_links"> </div>
            <div id="footer_notices">
              <div id="bottom_text">
                <div id="hydra_logo"><img alt="Hydra logo" height="50" src="/assets/hydra/powered_by_hydra.png" width="80"></div>
              </div>
            </div>
      		</div>
      		
        </body>
      </html>
      no button with value or id or text 'Upload file' found (Capybara::ElementNotFound)
      (eval):2:in `click_button'
      ./features/step_definitions/file_management.rb:7:in `/^I upload the file "(.*?)"$/'
      features/file_upload.feature:10:in `And I upload the file "spec/fixtures/videoshort.mp4"'
    Then I should see confirmation that it was uploaded      # features/step_definitions/file_management.rb:10

  #Then I should see "(Original file uploaded)" within "#file_status"
  Scenario: The system acknowledges that a file is a video   # features/file_upload.feature:14
    Given I am logged in as "archivist1@example.com"         # features/step_definitions/user_steps.rb:5
    And that "hydrant:318" has been loaded into fedora       # features/step_definitions/edit_metadata_steps.rb:49
      Refreshed hydrant:318
    And that "archivist1@example.com" can edit "hydrant:318" # features/step_definitions/edit_metadata_steps.rb:62
    When I go to the edit document page for hydrant:318      # features/step_definitions/web_steps.rb:23
    When I upload the file "spec/fixtures/videoshort.mp4"    # features/step_definitions/file_management.rb:1
      <!DOCTYPE html>
      <html>
      <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta charset="utf-8">
      <title>Pipi - Hydrant</title>
      <link href="http://www.example.com/catalog/opensearch.xml" title="Hydrant" type="application/opensearchdescription+xml" rel="search">
      <link href="/assets/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">
      <link href="/assets/application.css" media="screen" rel="stylesheet" type="text/css">
      <script src="/assets/application.js" type="text/javascript"></script><link href="/assets/hydra/html_refactor.css" media="all" rel="stylesheet" type="text/css">
      <script src="/assets/hydra/hydra-head.js" type="text/javascript"></script><script src="/assets/jquery.form.js" type="text/javascript"></script><script src="/assets/spin.min.js" type="text/javascript"></script>
      </head>
      <body class="blacklight-catalog blacklight-catalog-edit">
      
      		<div id="hd">
      			<div id="select-item-box">
        <ul>
      <li><a href="/hydra/assets/new?content_type=video" class="create_asset">Add an Audio Resource</a></li>
          <li><a href="/hydra/assets/new?content_type=video" class="create_asset">Add a Video Resource</a></li>
        </ul>
      </div>      
      
      
      <nav id="util_links"><a href="/users/edit">archivist1@example.com</a>
      
          
          <a href="/users/sign_out">Log Out</a>
      </nav>
      </div>
      	    
          <div id="bd">
            <div id="main">
              <div id="main_container">
                
                <div id="showHead">
        <div id="showUtils">
          <span class="back_to_cat"><a href="/catalog?action=index&amp;controller=catalog">← Return to search results</a></span>
          	<span class="edit-browse">
          		<a href="/catalog/hydrant:318?viewing_context=browse" class="browse toggle">Switch to browse view</a>
          	</span>
        </div>
      </div>
      <div id="document" class="document_edit ">
        <div id="hydrant_318">
          <h1>Add Your Work</h1>
          <div class="document">
                	<fieldset id="uploader">
      <legend>File Upload</legend>
      
      	    	<!-- This form will be progressively enhanced by the Fluid Uploader component. -->
      	    	<form accept-charset="UTF-8" action="/video_assets" class="uploader-form step" data-remote="true" enctype="multipart/form-data" method="post">
      <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>	      	<input type="hidden" name="container_id" value="hydrant:318"><div class="uploader-contents">
        <p>Browse to upload a file.</p>
        <!-- <input name="Filedata-orig" type="file" /> -->
        <input name="Filedata[]" type="file">
      </div>
      	      	
      	      	<input id="file_upload_id" name="id" type="hidden" value="hydrant:318"><input id="files_original" name="original" type="hidden"><p>
      	        	<input name="upload_file" type="submit" value="Upload File"></p>
      </form>  	</fieldset>
      <form accept-charset="UTF-8" action="/hydra/assets/hydrant:318?asset_id=hydrant%3A318" class="step" id="publication_history_form" method="post">
      <div style="margin:0;padding:0;display:inline">
      <input name="utf8" type="hidden" value="✓"><input name="_method" type="hidden" value="PUT">
      </div>  <p id="title_field" class="fedora-text-field">
          <label for="title">Title<span class="required-note">Required</span></label>
          <input class="fieldselector" name="field_selectors[descMetadata][title][]" type="hidden" value="title"><input class="editable-edit edit" id="title" data-datastream-name="descMetadata" name="asset[descMetadata][title][0]" value="Pipi" required type="text"></p>
      
        <p id="doc_field" class="fedora-text-field">
          <label for="creator">Creator<span class="required-note">Required</span></label>
          <input class="fieldselector" name="field_selectors[descMetadata][creator][]" type="hidden" value="creator"><input class="editable-edit edit" id="creator" data-datastream-name="descMetadata" name="asset[descMetadata][creator][0]" value="Popo" required type="text"></p>
      
        <p id="doc_field" class="fedora-text-field">
          <label for="date_of_creation">Date of creation</label>
          <input class="fieldselector" name="field_selectors[descMetadata][date_of_creation][]" type="hidden" value="date_of_creation"><input class="editable-edit edit" id="date_of_creation" data-datastream-name="descMetadata" name="asset[descMetadata][date_of_creation][0]" value="" type="text"></p>
      
        <input id="publisher_wf_step" name="wf_step" type="hidden"><input id="publisher_content_type" name="content_type" type="hidden" value="video"><div class="all-steps-actions">
          <button id="all_save_continue" name="all_save_continue">Save and Continue Editing</button>
          <button id="all_save_finish" name="all_save_finish">Save and Finish</button>
        </div>
      </form> 
      
      
          </div>
        </div>
      </div>
        <div class="delete-asset">
          <form action="/hydra/assets/hydrant:318" class="button_to" method="post"><div>
      <input name="_method" type="hidden" value="delete"><input data-confirm="Are you sure?" type="submit" value="Delete This Item">
      </div></form>
        </div>
      
              </div>
            </div>
            <div id="sidebar"></div>	
      	  </div>
      	    
      	    
      		<div id="ft">
            <div class="contact_info"></div> 
              <div class="aux_links"> </div>
            <div id="footer_notices">
              <div id="bottom_text">
                <div id="hydra_logo"><img alt="Hydra logo" height="50" src="/assets/hydra/powered_by_hydra.png" width="80"></div>
              </div>
            </div>
      		</div>
      		
        </body>
      </html>
      no button with value or id or text 'Upload file' found (Capybara::ElementNotFound)
      (eval):2:in `click_button'
      ./features/step_definitions/file_management.rb:7:in `/^I upload the file "(.*?)"$/'
      features/file_upload.feature:19:in `When I upload the file "spec/fixtures/videoshort.mp4"'
    Then I should see confirmation that it is video content  # features/step_definitions/file_management.rb:15

  Scenario: The system acknowledges that a file is an audio clip # features/file_upload.feature:22
    Given I am logged in as "archivist1@example.com"             # features/step_definitions/user_steps.rb:5
    And that "hydrant:318" has been loaded into fedora           # features/step_definitions/edit_metadata_steps.rb:49
      Refreshed hydrant:318
    And that "archivist1@example.com" can edit "hydrant:318"     # features/step_definitions/edit_metadata_steps.rb:62
    When I go to the edit document page for hydrant:318          # features/step_definitions/web_steps.rb:23
    When I upload the file "spec/fixtures/jazz-performance.mp3"  # features/step_definitions/file_management.rb:1
      <!DOCTYPE html>
      <html>
      <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta charset="utf-8">
      <title>Pipi - Hydrant</title>
      <link href="http://www.example.com/catalog/opensearch.xml" title="Hydrant" type="application/opensearchdescription+xml" rel="search">
      <link href="/assets/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">
      <link href="/assets/application.css" media="screen" rel="stylesheet" type="text/css">
      <script src="/assets/application.js" type="text/javascript"></script><link href="/assets/hydra/html_refactor.css" media="all" rel="stylesheet" type="text/css">
      <script src="/assets/hydra/hydra-head.js" type="text/javascript"></script><script src="/assets/jquery.form.js" type="text/javascript"></script><script src="/assets/spin.min.js" type="text/javascript"></script>
      </head>
      <body class="blacklight-catalog blacklight-catalog-edit">
      
      		<div id="hd">
      			<div id="select-item-box">
        <ul>
      <li><a href="/hydra/assets/new?content_type=video" class="create_asset">Add an Audio Resource</a></li>
          <li><a href="/hydra/assets/new?content_type=video" class="create_asset">Add a Video Resource</a></li>
        </ul>
      </div>      
      
      
      <nav id="util_links"><a href="/users/edit">archivist1@example.com</a>
      
          
          <a href="/users/sign_out">Log Out</a>
      </nav>
      </div>
      	    
          <div id="bd">
            <div id="main">
              <div id="main_container">
                
                <div id="showHead">
        <div id="showUtils">
          <span class="back_to_cat"><a href="/catalog?action=index&amp;controller=catalog">← Return to search results</a></span>
          	<span class="edit-browse">
          		<a href="/catalog/hydrant:318?viewing_context=browse" class="browse toggle">Switch to browse view</a>
          	</span>
        </div>
      </div>
      <div id="document" class="document_edit ">
        <div id="hydrant_318">
          <h1>Add Your Work</h1>
          <div class="document">
                	<fieldset id="uploader">
      <legend>File Upload</legend>
      
      	    	<!-- This form will be progressively enhanced by the Fluid Uploader component. -->
      	    	<form accept-charset="UTF-8" action="/video_assets" class="uploader-form step" data-remote="true" enctype="multipart/form-data" method="post">
      <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>	      	<input type="hidden" name="container_id" value="hydrant:318"><div class="uploader-contents">
        <p>Browse to upload a file.</p>
        <!-- <input name="Filedata-orig" type="file" /> -->
        <input name="Filedata[]" type="file">
      </div>
      	      	
      	      	<input id="file_upload_id" name="id" type="hidden" value="hydrant:318"><input id="files_original" name="original" type="hidden"><p>
      	        	<input name="upload_file" type="submit" value="Upload File"></p>
      </form>  	</fieldset>
      <form accept-charset="UTF-8" action="/hydra/assets/hydrant:318?asset_id=hydrant%3A318" class="step" id="publication_history_form" method="post">
      <div style="margin:0;padding:0;display:inline">
      <input name="utf8" type="hidden" value="✓"><input name="_method" type="hidden" value="PUT">
      </div>  <p id="title_field" class="fedora-text-field">
          <label for="title">Title<span class="required-note">Required</span></label>
          <input class="fieldselector" name="field_selectors[descMetadata][title][]" type="hidden" value="title"><input class="editable-edit edit" id="title" data-datastream-name="descMetadata" name="asset[descMetadata][title][0]" value="Pipi" required type="text"></p>
      
        <p id="doc_field" class="fedora-text-field">
          <label for="creator">Creator<span class="required-note">Required</span></label>
          <input class="fieldselector" name="field_selectors[descMetadata][creator][]" type="hidden" value="creator"><input class="editable-edit edit" id="creator" data-datastream-name="descMetadata" name="asset[descMetadata][creator][0]" value="Popo" required type="text"></p>
      
        <p id="doc_field" class="fedora-text-field">
          <label for="date_of_creation">Date of creation</label>
          <input class="fieldselector" name="field_selectors[descMetadata][date_of_creation][]" type="hidden" value="date_of_creation"><input class="editable-edit edit" id="date_of_creation" data-datastream-name="descMetadata" name="asset[descMetadata][date_of_creation][0]" value="" type="text"></p>
      
        <input id="publisher_wf_step" name="wf_step" type="hidden"><input id="publisher_content_type" name="content_type" type="hidden" value="video"><div class="all-steps-actions">
          <button id="all_save_continue" name="all_save_continue">Save and Continue Editing</button>
          <button id="all_save_finish" name="all_save_finish">Save and Finish</button>
        </div>
      </form> 
      
      
          </div>
        </div>
      </div>
        <div class="delete-asset">
          <form action="/hydra/assets/hydrant:318" class="button_to" method="post"><div>
      <input name="_method" type="hidden" value="delete"><input data-confirm="Are you sure?" type="submit" value="Delete This Item">
      </div></form>
        </div>
      
              </div>
            </div>
            <div id="sidebar"></div>	
      	  </div>
      	    
      	    
      		<div id="ft">
            <div class="contact_info"></div> 
              <div class="aux_links"> </div>
            <div id="footer_notices">
              <div id="bottom_text">
                <div id="hydra_logo"><img alt="Hydra logo" height="50" src="/assets/hydra/powered_by_hydra.png" width="80"></div>
              </div>
            </div>
      		</div>
      		
        </body>
      </html>
      no button with value or id or text 'Upload file' found (Capybara::ElementNotFound)
      (eval):2:in `click_button'
      ./features/step_definitions/file_management.rb:7:in `/^I upload the file "(.*?)"$/'
      features/file_upload.feature:27:in `When I upload the file "spec/fixtures/jazz-performance.mp3"'
    Then I should see confirmation that it is audio content      # features/step_definitions/file_management.rb:15

  Scenario: The system reports that a file is unrecognized (image) # features/file_upload.feature:30
    Given I am logged in as "archivist1@example.com"               # features/step_definitions/user_steps.rb:5
    And that "hydrant:318" has been loaded into fedora             # features/step_definitions/edit_metadata_steps.rb:49
      Refreshed hydrant:318
    And that "archivist1@example.com" can edit "hydrant:318"       # features/step_definitions/edit_metadata_steps.rb:62
    When I go to the edit document page for hydrant:318            # features/step_definitions/web_steps.rb:23
    When I upload the file "spec/fixtures/fire-hydrant.jpg"        # features/step_definitions/file_management.rb:1
      <!DOCTYPE html>
      <html>
      <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta charset="utf-8">
      <title>Pipi - Hydrant</title>
      <link href="http://www.example.com/catalog/opensearch.xml" title="Hydrant" type="application/opensearchdescription+xml" rel="search">
      <link href="/assets/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">
      <link href="/assets/application.css" media="screen" rel="stylesheet" type="text/css">
      <script src="/assets/application.js" type="text/javascript"></script><link href="/assets/hydra/html_refactor.css" media="all" rel="stylesheet" type="text/css">
      <script src="/assets/hydra/hydra-head.js" type="text/javascript"></script><script src="/assets/jquery.form.js" type="text/javascript"></script><script src="/assets/spin.min.js" type="text/javascript"></script>
      </head>
      <body class="blacklight-catalog blacklight-catalog-edit">
      
      		<div id="hd">
      			<div id="select-item-box">
        <ul>
      <li><a href="/hydra/assets/new?content_type=video" class="create_asset">Add an Audio Resource</a></li>
          <li><a href="/hydra/assets/new?content_type=video" class="create_asset">Add a Video Resource</a></li>
        </ul>
      </div>      
      
      
      <nav id="util_links"><a href="/users/edit">archivist1@example.com</a>
      
          
          <a href="/users/sign_out">Log Out</a>
      </nav>
      </div>
      	    
          <div id="bd">
            <div id="main">
              <div id="main_container">
                
                <div id="showHead">
        <div id="showUtils">
          <span class="back_to_cat"><a href="/catalog?action=index&amp;controller=catalog">← Return to search results</a></span>
          	<span class="edit-browse">
          		<a href="/catalog/hydrant:318?viewing_context=browse" class="browse toggle">Switch to browse view</a>
          	</span>
        </div>
      </div>
      <div id="document" class="document_edit ">
        <div id="hydrant_318">
          <h1>Add Your Work</h1>
          <div class="document">
                	<fieldset id="uploader">
      <legend>File Upload</legend>
      
      	    	<!-- This form will be progressively enhanced by the Fluid Uploader component. -->
      	    	<form accept-charset="UTF-8" action="/video_assets" class="uploader-form step" data-remote="true" enctype="multipart/form-data" method="post">
      <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>	      	<input type="hidden" name="container_id" value="hydrant:318"><div class="uploader-contents">
        <p>Browse to upload a file.</p>
        <!-- <input name="Filedata-orig" type="file" /> -->
        <input name="Filedata[]" type="file">
      </div>
      	      	
      	      	<input id="file_upload_id" name="id" type="hidden" value="hydrant:318"><input id="files_original" name="original" type="hidden"><p>
      	        	<input name="upload_file" type="submit" value="Upload File"></p>
      </form>  	</fieldset>
      <form accept-charset="UTF-8" action="/hydra/assets/hydrant:318?asset_id=hydrant%3A318" class="step" id="publication_history_form" method="post">
      <div style="margin:0;padding:0;display:inline">
      <input name="utf8" type="hidden" value="✓"><input name="_method" type="hidden" value="PUT">
      </div>  <p id="title_field" class="fedora-text-field">
          <label for="title">Title<span class="required-note">Required</span></label>
          <input class="fieldselector" name="field_selectors[descMetadata][title][]" type="hidden" value="title"><input class="editable-edit edit" id="title" data-datastream-name="descMetadata" name="asset[descMetadata][title][0]" value="Pipi" required type="text"></p>
      
        <p id="doc_field" class="fedora-text-field">
          <label for="creator">Creator<span class="required-note">Required</span></label>
          <input class="fieldselector" name="field_selectors[descMetadata][creator][]" type="hidden" value="creator"><input class="editable-edit edit" id="creator" data-datastream-name="descMetadata" name="asset[descMetadata][creator][0]" value="Popo" required type="text"></p>
      
        <p id="doc_field" class="fedora-text-field">
          <label for="date_of_creation">Date of creation</label>
          <input class="fieldselector" name="field_selectors[descMetadata][date_of_creation][]" type="hidden" value="date_of_creation"><input class="editable-edit edit" id="date_of_creation" data-datastream-name="descMetadata" name="asset[descMetadata][date_of_creation][0]" value="" type="text"></p>
      
        <input id="publisher_wf_step" name="wf_step" type="hidden"><input id="publisher_content_type" name="content_type" type="hidden" value="video"><div class="all-steps-actions">
          <button id="all_save_continue" name="all_save_continue">Save and Continue Editing</button>
          <button id="all_save_finish" name="all_save_finish">Save and Finish</button>
        </div>
      </form> 
      
      
          </div>
        </div>
      </div>
        <div class="delete-asset">
          <form action="/hydra/assets/hydrant:318" class="button_to" method="post"><div>
      <input name="_method" type="hidden" value="delete"><input data-confirm="Are you sure?" type="submit" value="Delete This Item">
      </div></form>
        </div>
      
              </div>
            </div>
            <div id="sidebar"></div>	
      	  </div>
      	    
      	    
      		<div id="ft">
            <div class="contact_info"></div> 
              <div class="aux_links"> </div>
            <div id="footer_notices">
              <div id="bottom_text">
                <div id="hydra_logo"><img alt="Hydra logo" height="50" src="/assets/hydra/powered_by_hydra.png" width="80"></div>
              </div>
            </div>
      		</div>
      		
        </body>
      </html>
      cannot attach file, spec/fixtures/fire-hydrant.jpg does not exist (Capybara::FileNotFound)
      (eval):2:in `attach_file'
      ./features/step_definitions/file_management.rb:6:in `/^I upload the file "(.*?)"$/'
      features/file_upload.feature:35:in `When I upload the file "spec/fixtures/fire-hydrant.jpg"'
    Then I should an error message that the file is not recognized # features/step_definitions/file_management.rb:20

  Scenario: The system reports that a file is unrecognized (PDF)   # features/file_upload.feature:38
    Given I am logged in as "archivist1@example.com"               # features/step_definitions/user_steps.rb:5
    And that "hydrant:318" has been loaded into fedora             # features/step_definitions/edit_metadata_steps.rb:49
      Refreshed hydrant:318
    And that "archivist1@example.com" can edit "hydrant:318"       # features/step_definitions/edit_metadata_steps.rb:62
    When I go to the edit document page for hydrant:318            # features/step_definitions/web_steps.rb:23
    When I upload the file "spec/fixtures/public-domain-book.pdf"  # features/step_definitions/file_management.rb:1
      <!DOCTYPE html>
      <html>
      <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta charset="utf-8">
      <title>Pipi - Hydrant</title>
      <link href="http://www.example.com/catalog/opensearch.xml" title="Hydrant" type="application/opensearchdescription+xml" rel="search">
      <link href="/assets/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon">
      <link href="/assets/application.css" media="screen" rel="stylesheet" type="text/css">
      <script src="/assets/application.js" type="text/javascript"></script><link href="/assets/hydra/html_refactor.css" media="all" rel="stylesheet" type="text/css">
      <script src="/assets/hydra/hydra-head.js" type="text/javascript"></script><script src="/assets/jquery.form.js" type="text/javascript"></script><script src="/assets/spin.min.js" type="text/javascript"></script>
      </head>
      <body class="blacklight-catalog blacklight-catalog-edit">
      
      		<div id="hd">
      			<div id="select-item-box">
        <ul>
      <li><a href="/hydra/assets/new?content_type=video" class="create_asset">Add an Audio Resource</a></li>
          <li><a href="/hydra/assets/new?content_type=video" class="create_asset">Add a Video Resource</a></li>
        </ul>
      </div>      
      
      
      <nav id="util_links"><a href="/users/edit">archivist1@example.com</a>
      
          
          <a href="/users/sign_out">Log Out</a>
      </nav>
      </div>
      	    
          <div id="bd">
            <div id="main">
              <div id="main_container">
                
                <div id="showHead">
        <div id="showUtils">
          <span class="back_to_cat"><a href="/catalog?action=index&amp;controller=catalog">← Return to search results</a></span>
          	<span class="edit-browse">
          		<a href="/catalog/hydrant:318?viewing_context=browse" class="browse toggle">Switch to browse view</a>
          	</span>
        </div>
      </div>
      <div id="document" class="document_edit ">
        <div id="hydrant_318">
          <h1>Add Your Work</h1>
          <div class="document">
                	<fieldset id="uploader">
      <legend>File Upload</legend>
      
      	    	<!-- This form will be progressively enhanced by the Fluid Uploader component. -->
      	    	<form accept-charset="UTF-8" action="/video_assets" class="uploader-form step" data-remote="true" enctype="multipart/form-data" method="post">
      <div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="✓"></div>	      	<input type="hidden" name="container_id" value="hydrant:318"><div class="uploader-contents">
        <p>Browse to upload a file.</p>
        <!-- <input name="Filedata-orig" type="file" /> -->
        <input name="Filedata[]" type="file">
      </div>
      	      	
      	      	<input id="file_upload_id" name="id" type="hidden" value="hydrant:318"><input id="files_original" name="original" type="hidden"><p>
      	        	<input name="upload_file" type="submit" value="Upload File"></p>
      </form>  	</fieldset>
      <form accept-charset="UTF-8" action="/hydra/assets/hydrant:318?asset_id=hydrant%3A318" class="step" id="publication_history_form" method="post">
      <div style="margin:0;padding:0;display:inline">
      <input name="utf8" type="hidden" value="✓"><input name="_method" type="hidden" value="PUT">
      </div>  <p id="title_field" class="fedora-text-field">
          <label for="title">Title<span class="required-note">Required</span></label>
          <input class="fieldselector" name="field_selectors[descMetadata][title][]" type="hidden" value="title"><input class="editable-edit edit" id="title" data-datastream-name="descMetadata" name="asset[descMetadata][title][0]" value="Pipi" required type="text"></p>
      
        <p id="doc_field" class="fedora-text-field">
          <label for="creator">Creator<span class="required-note">Required</span></label>
          <input class="fieldselector" name="field_selectors[descMetadata][creator][]" type="hidden" value="creator"><input class="editable-edit edit" id="creator" data-datastream-name="descMetadata" name="asset[descMetadata][creator][0]" value="Popo" required type="text"></p>
      
        <p id="doc_field" class="fedora-text-field">
          <label for="date_of_creation">Date of creation</label>
          <input class="fieldselector" name="field_selectors[descMetadata][date_of_creation][]" type="hidden" value="date_of_creation"><input class="editable-edit edit" id="date_of_creation" data-datastream-name="descMetadata" name="asset[descMetadata][date_of_creation][0]" value="" type="text"></p>
      
        <input id="publisher_wf_step" name="wf_step" type="hidden"><input id="publisher_content_type" name="content_type" type="hidden" value="video"><div class="all-steps-actions">
          <button id="all_save_continue" name="all_save_continue">Save and Continue Editing</button>
          <button id="all_save_finish" name="all_save_finish">Save and Finish</button>
        </div>
      </form> 
      
      
          </div>
        </div>
      </div>
        <div class="delete-asset">
          <form action="/hydra/assets/hydrant:318" class="button_to" method="post"><div>
      <input name="_method" type="hidden" value="delete"><input data-confirm="Are you sure?" type="submit" value="Delete This Item">
      </div></form>
        </div>
      
              </div>
            </div>
            <div id="sidebar"></div>	
      	  </div>
      	    
      	    
      		<div id="ft">
            <div class="contact_info"></div> 
              <div class="aux_links"> </div>
            <div id="footer_notices">
              <div id="bottom_text">
                <div id="hydra_logo"><img alt="Hydra logo" height="50" src="/assets/hydra/powered_by_hydra.png" width="80"></div>
              </div>
            </div>
      		</div>
      		
        </body>
      </html>
      no button with value or id or text 'Upload file' found (Capybara::ElementNotFound)
      (eval):2:in `click_button'
      ./features/step_definitions/file_management.rb:7:in `/^I upload the file "(.*?)"$/'
      features/file_upload.feature:43:in `When I upload the file "spec/fixtures/public-domain-book.pdf"'
    Then I should an error message that the file is not recognized # features/step_definitions/file_management.rb:20

Failing Scenarios:
cucumber features/file_upload.feature:5 # Scenario: Upload files on catalog edit page
cucumber features/file_upload.feature:14 # Scenario: The system acknowledges that a file is a video
cucumber features/file_upload.feature:22 # Scenario: The system acknowledges that a file is an audio clip
cucumber features/file_upload.feature:30 # Scenario: The system reports that a file is unrecognized (image)
cucumber features/file_upload.feature:38 # Scenario: The system reports that a file is unrecognized (PDF)

7 scenarios (5 failed, 2 passed)
37 steps (5 failed, 5 skipped, 27 passed)
0m9.659s
